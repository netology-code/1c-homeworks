# Задание к занятию "Модули и параметры сеанса"

## Цель задания

1. Научится создавать обработчики событий в различных модулях.
2. Решить задачу на сохранения времени старта сеанса
3. Повторить приемы отладки

## Чеклист готовности к домашнему заданию

1. Установлена учебная платформа версии 8.3.20 или больше.
2. Развернута информационная база с конфигурацией **УправлениеИТФирмой**, полученная по итогу выполнения [домашнего задания к занятию Дерево метаданных](/homework-1-3.md)

## Инструкция к заданию

1. Решите описанные задачи в конфигураторе.
2. Протестируйте решение в пользовательском режиме.
3. Для задач 1-4 отправьте на проверку один общий файл выгрузки информационной базы (.dt) с конфигурацией, содержащей решения по всем четырем задачам.
4. Для задачи 5 результат исследования алгоритма напишите в комментарии к решению.

## Инструменты/ дополнительные материалы, которые пригодятся для выполнения задания

...

## Задача 1 "Обработчики событий модуля приложения"

### Описание задачи
Создать обработчик события **ПриНачалеРаботыСистемы**, выводящий простейшее приветствие.

### Требования к результату
При запуске пользовательского режима выводится простейшее приветствие.

### Процесс выполнения
1. Используйте конфигурацию **УправлениеИТФирмой**
2. В модуле приложения создайте обработчик события **ПриНачалеРаботыСистемы**.
3. В его коде выведите простейшее приветствие вызовом **Сообщить()** или **ПредупреждениеАсинх()**.

## Задача 2 "Обработчики событий модуля формы"

### Описание задачи
Создать обработчик события **ПриИзменении** элемента **Наименование** формы справочника **Контрагенты**, заполняющий полное наименование - измененным наименованием.

### Требования к результату
В справочник **Контрагенты** добавлена форма элемента, на которой реквизит **ПолноеНаименование** заполняется значением стандартного реквизита **Наименование** при его (Наименования) изменении.

### Процесс выполнения
1. Используйте ту же конфигурацию **УправлениеИТФирмой**, которую дорабатывали в прошлом задании. Убедитесь, что в справочнике **Контрагенты** есть реквизит **ПолноеНаименование**.
2. Создайте для справочника **Контрагенты** форму элемента
3. Выберите в форме элемента стандартный реквизит **Наименование** и создайте обработчик события **ПриИзменении** этого элемента.
  * Проще всего - выбрать это событие из контекстного меню элемента.
4. В коде обработчика присвойте реквизиту **Объект.ПолноеНаименование** значение наименования. Подумайте, требуется ли в данном случае переход на сервер, или действия можно выполнить на клиенте?
5. В режиме Предприятия удостоверьтесь, что любое изменение наименования отражается в полном наименовании, но не наоборот.

## Задача 3 "Обработчики событий модуля объекта"

### Описание задачи
Создать обработчик заполнения справочника **Контрагенты**, назначающий по умолчанию тип **ЮридическоеЛицо**.

### Требования к результату
При создании нового элемента справочника **Контрагенты**, реквизит **ЮридическоеФизическоеЛицо** заполняется автоматически значением **ЮридическоеЛицо**.

### Процесс выполнения
1. Используйте ту же конфигурацию **УправлениеИТФирмой**, которую дорабатывали в прошлом задании. Убедитесь, что в конфигурации есть перечисление **ЮридическоеФизическоеЛицо**.
2. Откройте модуль объекта справочника **Контрагенты** и создайте в нем обработчик события **ОбработкаЗаполнения**.
3. Присвойте значению реквизита **ЮридическоеФизическоеЛицо** значение **Перечисления.ЮридическоеФизическоеЛицо.ЮридическоеЛицо**.
4. В режиме Предприятия удостоверьтесь в том, что новым контрагентам сразу назначается тип **ЮридическоеЛицо**.

## Задача 4 "Параметры сеанса"

### Описание задачи
Создать параметр сеанса **ВремяНачалаСеанса**, который хранил бы на сервере сведения о времени начала сеанса. Реализовать обработку для получения информации о дительности текущего сеанса в секундах.

### Требования к результату
Выгрузка информационной базы (.dt) с конфигурацией, в которой созданы:
- Параметр сеанса **ВремяНачалаСеанса** типа Дата и время, который после запуска клиентского сеанса хранил время, в которое был запущен сеанс;
- Обработка **ПроверкаДлительностиСеанса** с командой **Длительность сеанса** в основной форме.

### Процесс выполнения

1. Добавляем параметр сеанса **ВремяНачалаСеанса** типа **Дата** с составом даты **Дата и время**.
2. В модуле сеанса создаем обработчик **УстановкаПараметровСеанса**, в коде которого записываем в параметр сеанса текущее время, полученное с помощью метода `ТекущаяДатаСеанса()`.
3. Создаем общий модуль **СеансыВызовСервера** с флажками **Сервер** и **Вызов сервера**
4. Реализуем в модуле **СеансыВызовСервера** экспортную функцию **ВремяНачалаСеанса**, которая будет возвращать значение параметра сеанса **ВремяНачалаСеанса**
5. Создаем обработку **ПроверкаДлительностиСеанса**, основную форму обработки, на форму добавляем команду **Длительность сеанса** и назначаем обработчик
6. В обработчике команды **Длительность сеанса** получаем значение параметра сеанса и выводим пользователю информацию о длительности сеанса:
  - Чтобы получить длительность сеанса в секундах необходимо из `ТекущейДаты()` вычести время начала сеанса, полученное из функции.
  - Для вывода длительности пользователю можно использовать метод `Сообщить()`

## Задача 5 "Исследование значений переменных"

### Описание задачи
С помощью отладчика узнайте секретные числа, спрятанные в конфигурации.

### Требования к результату
Перечень секретных чисел в нужном порядке в комментариях к решению задания.

### Процесс выполнения
1. Скачайте [конфигурацию](/homework-2-1.cf) и загрузите в новую информационную базу
2. Откройте конфигуратор и поставьте точку останова в единственном методе в общей форме **Упражнение**
3. Запустить в пользовательском режиме и с помощью отладчика узнайте значение 6 секретных чисел, которые суммируются.
4. В качестве решения отправьте эти числа в правильном порядке (сначала Число1, потом Число2 и т.д.) в комметариях к домашенему заданию.

## Критерии оценки

Задание считается выполненным при соблюдении следующих условий:
1. Решению включает выгрузку в формате dt с конфигурацией **УправлениеИТФирмой**;
2. При запуске приложения выводится приветственное сообщение;
3. При заполнении наименования нового элемента справочника **Контрагенты** полное наименование заполняется автоматически;
4. При создании нового элемента справочника **Контрагенты** реквизит ЮридическоеФизическоеЛицо автоматически заполняется значением ЮридическоеЛицо;
5. В приложении есть обработка с кнопкой Длительность сеанса, при нажатии на которую выводится сколько секунд прошло с начала сеанса;
6. В комментариях к решению указаны секретные числа из Задачи 5.