# Задание к занятию «Форма объекта»

*Примерное время выполнения: 20–60 минут*

## Цель задания

1. Научиться работать с формами объектов, корректно располагать реквизиты на форме.
2. Подготовить конфигурацию к последующей работе.

## Чеклист готовности к домашнему заданию

- [ ] Установить учебную платформу версии 8.3.22 или больше.
- [ ] Подготовить разработанную ранее конфигурацию "УправлениеИТФирмой"
- [ ] Просмотреть материал занятия «Форма объекта».

## Инструкция к заданию

1. Решите описанные задачи в конфигураторе.

В тексте задания приведен программный код для решения задач. Конечно, Вы можете использовать его. Но для более продуктивного обучения, старайтесь, сначала, самостоятельно написать код. Если все же, самостоятельно решить задачу не удалось, используйте код из текста задачи но обязательно пройдите его в отладке, посмотрите, что попадает в переменные, как преобразуются значения. Старайтесь максимально детально разобраться в механизме.

2. Протестируйте решение в пользовательском режиме, обязательно введите данные в базу, убедитесь, что все работает.
3. Отправьте на проверку в личном кабинете Нетологии один общий файл базы данных (.dt), содержащей решение всех задач.

## Задача 1. Добавить вкладки на форме документа в документы «Поступление товаров и услуг» и «Реализация товаров и услуг»

### Описание задачи

Для удобства работы на разных устройствах и разрешениях экрана лучше делать форму меньше по ширине и группировать реквизиты и табличные части документа.

Добавим вкладки на форме документа «Основное» и «Товары». Перенесём соответствующие реквизиты и табличные части в них.

### Процесс выполнения

1. Используйте конфигурацию "Управение ИТ Фирмой", разработанную ранее.
2. На форме документа "Поступление товаров и услуг" создайте группу страниц формы, в ней - 2 страницы "Основное" и "Товары"
3. Все реквизиты документа разместите на странице "Основное" в удобном для использования виде

<details>
  <summary>Важно</summary>
  Обращайте внимание на свойство Группировка. Лучше выбирать "Вертикальная" или "Горизонтальная всегда", чтобы положение элементов в форме было одназначно. Вариант по умолчанию - "Горизонтальная если возможно" - может приводить к тому что на Вашем мониторе форма будет выглядеть корректно, а у пользователя (или проверяющего ДЗ) "разъедется"
</details>

4. На странице "Товары" разместите табличную часть.
5. Повторите настройку для формы Реализации товаров.

<details>
  <summary>Дополнительно</summary>
  Так же, рекомендуем аналогично, страницами, оформить форму элемента справочника Контрагенты
</details>

6. В пользовательском режиме проверьте корректность работы всех элементов форм

## Задача 2. Создание документа "Установка цен"

### Описание задачи

Создадим документ, которым пользователи будут устанавливать цены товаров. При этом создавать документы может любой пользователь, а проводить - только пользователь с ролью "Полные права"

Состав реквизитов документа:

- Контрагент (СправочникСсылка.Контрагенты)
- Ответственный (СправочникСсылка.Сотрудники, Заполняется значением текущего сотрудника, связанного с пользователем, из параметра сеанса)
- Согласовано (Булево)
- Комментарий (Строка неограниченной длины, многострочный)
- Табличная часть Цены:
  - Номенклатура (СправочникСсылка.Номенклатура)
  - Цена (Определяемый тип, используемый для денежных значений)

### Процесс выполнения

1. Создайте документ "Установка цен" по приведенному описанию. Определите его в подсистему Сделки. Дайте права на работу с документом роли Базовые права.
2. Создайте форму документа, оформите ее аналогично предыдущим - форма должна состоять из двух страниц - с реквизитами и с табличной частью.
3. Настройте права на реквизит Согласовано - право редактирования реквизита должно быть только у пользователя с полными правами, в остальных ролях, это право надо отключить
4. Пропишите проверку заполнения реквизита

<details>
  <summary>Код</summary>
  
  Т.к. проверка должна срабатывать при любой записи документа, она должна располагаться в модуле объекта документа

```bsl

Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)

  Если Не Согласовано Тогда
		Отказ = Истина;
		Сообщить("Требуется согласовать документ");
	КонецЕсли;
	
КонецПроцедуры
```
  
</details>

## Задача 3*. Блокирование элементов документа Установка цен

*Это дополнительная задача, реализовывать ее не обязательно.*
*Задача предназначена для тех студентов, которым первые покажутся слишкм простыми.*
*В процессе выполнения не будут даны примеры программного кода.*

### Описание задачи

Доработайте форму документа таким образом, что если при открытии документа, если флаг "Согласовано" установлен, внести в нее изменения было бы нельзя

### Процесс выполнения

1. При открытии формы документа, проанализируйте состояние реквизита согласовано, и если в нем Истина, меняйте доступность элементов формы
2. Для администратора, логично, добавить возможность разблокировать форму при снятии флажка

## Пример

[Пример выполнения домашнего задания](examples/HW_4_4_example.md)

## Критерии оценки

Зачёт ставится, если:

1. Программа запускается, не возникает явных ошибок, исключений при выполнении программы (в том числе, если Вы начали делать дополнительную задачу, ее функционал не должен приводить к ошибкам и исключениям)
2. Создан документ "Установка цен", согласно заданию
3. В документах есть вкладка «Основное» и «Товары». Все реквизиты и табличные части собраны в них. При наличии дополнительных реквизитов распределить по своему усмотрению.
4. Документ Установка цен не проводится при снятом флаге Согласовано, выводится предупреждение для пользователя
5. Роли настроены корректно, с флагом может работать только пользователь с ролью ПолныеПрава. Ниодна другая роль не должна давать права на редактирование реквизита Согласовано
6. Введены тестовые данные

Задачи 1 и 2 обязательны к выполнению (кроме текста под спойлером "Дополнительно" - эти задачи делать не обязательно. Возможно, Вы вернетесь к ним позднее, после того, как изучите дополнительный материал). Задача 3 - не обязательна

Пожалуйста, присылайте на проверку все задачи сразу, одним файлом выгрузки информационной базы (dt)

Любые вопросы по решению задач задавайте в чате учебной группы.
