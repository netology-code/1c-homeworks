# Задание к занятию "Виртуальные таблицы"

## Задача 1 "Установка цен"

### Описание задачи
Переделать обработку "Установка цен" с использованием среза последних или функции ПолучитьПоследнее().

### Требования к результату
Выгрузка информационной базы (.dt) с Обработкой УстановкаЦен из предыдущего задания (https://github.com/netology-code/1c-homeworks/blob/master/homework-4-5.md), в которой получение текущей цены для изменения на процент реализовано через срез последних или функцию ПолучитьПоследнее().

### Процесс выполнения
* Взять обработку из предыдущего задания (https://github.com/netology-code/1c-homeworks/blob/master/homework-4-5.md).
* Установку цен процентом от текущей переписать так, чтобы исходная цена определялась не чтением всех записей, а обращением к срезу последних или к функции ПолучитьПоследнее().

## Задача 2 "Цены на дату"

### Описание задачи

Создать отчет, выводящий цены номенклатуры на указанную дату.

### Требования к результату

Выгрузка информационной базы (.dt) с Отчетом "Цены на дату", который:
* построен на СКД;
* содержит параметр НаДату с быстрым доступом;
* выводит номенклатуру и цену из среза последних на конец дня указанной даты.

### Процесс выполнения

* Создать отчет ЦеныНаДату, в котором:
  * Создать основную схему компоновки данных;
  * Добавить в нее набор данных - запрос;
  * Открыв "Конструктор запроса", добавить виртуальную таблицу "РегистрыСведений.Цены.СрезПоследних" со всеми ее полями, первым параметром указав параметр **{&НаДату}**;
  * Чтобы в срез попали и цены, установленные в указанную дату, на закладке "Параметры" для параметра НаДату указать выражение "КОНЕЦПЕРИОДА(&НаДату, "День")";
  * Добавить поле Цена на закладке Ресурсы с функцией Максимум(), выбрав в колонке "Рассчитывать по" расчет по номенклатуре (но не по иерархии номенклатуры, поскольку цены для группы большого смысла не имеют);
  * На закладке "Настройка", в варианте "Основной", добавить группировку Номенклатура - Иерархия;
  * В "Выбранные поля" перетащить поля Номенклатура и Цена.
  * На закладке "Параметры", в свойствах пользовательских настроек параметра НаДату, поставить флажок "Быстрый доступ", чтобы дата появилась сразу в форме отчета.
  * Проверить отчет в режиме Предприятия.
