# Задание к занятию "Временные таблицы и пакетные запросы"

Все задачи обязательны к выполнению. 
Любые вопросы по решению задач задавайте в чате учебной группы.

## Цель задания

1. Научиться использовать временные таблицы и пакеты запросов

## Чеклист готовности к домашнему заданию

- [ ] Установить платформу 1С:Предприятие версии 8.3.22 или больше.

## Инструкция к заданию

1. Изучите структуру конфигурации в конфигураторе. Какие есть справочники, документы, регистры. Как они друг с другом связаны.
2. Реализуйте алгоритм расчета себестоимости при продаже товаров.
3. Запустите пользовательский режим и для задач 5.1 - 5.3 составьте текст запроса, удовлетворяющий условиям.
4. Проверьте текст запроса через встроенный механизм проверки.

## Задача 1 "Расчет себестоимости товаров"

### Описание задачи
Необходимо реализовать возможность хранения и расчета себестоимости для остатков товаров

### Требования к результату
В регистре сведений Остатки товаров добавлен ресурс Сумма. В документах Покупка и Продажа реализован алгоритм заполнения этого ресурса при проведении.

### Процесс выполнения
1. Используйте базу, полученную по итогам предыдущего задания.
2. Добавить в регистр накопления Остатки товаров ресурс Сумма - Число (15, 2), Неотриательное.
3. Добавить в обработку проведения документа Покупка заполнение ресурса Сумма при проведении. Сумма заполняется соответствующим значением из табличной части.
4. Переработать обработку проведения документа Продажа:
  - Перед выполнением запроса к базе данных необходимо записать пустой набор движений в регистр Остатки товаров.
  - В запросе необходимо получить остатки на дату документа по количеству и сумме.
  - Если товара не хватает, то не даем проводить документ. Пользователю выводим соообщение с информацией о том какого товара в каком количестве не хватает. Сообщение должно быть привязано к ячейке таблицы, в которую введено количество недостающего товара.
  - При формировании движений необходимо рассчитывать себестоимость как "СуммаОстаток / КоличествоОстаток * Количество".
  - Необходимо учитывать, что в документе может быть несколько строк с одним и тем же товаров.
  - Необходимо учитывать проблему копеек при расчете себестоимости, то есть если количество товара в документе равно остатку, то списываемую сумму не вычисляем математически, а просто списываем полный остаток.
  - В ресурс Сумма записываем рассчитанную себестоимость товара, который продаем.

## Задача 2 (со звёздочкой) "Решение задач 5.1 - 5.3 самоучителя запросов"

### Описание задачи
Составьте тексты запросов, удовлетворящих условиям задач в тренажере.

### Требования к результату
В поле статуса каждой задачи должно быть указано "Решение верно".

### Процесс выполнения
1. Запустите базу в пользовательском режиме.
2. Подготовьте текст запроса, удовлетворяющий заданию, в поле "Решение" для задание 5.1 - 5.3
    - Условие задания выводится справа от поля "Решение"
    - Для подготовки текста запроса можно воспользоваться конструктором запросов
3. Проверьте решение с помощью команды "Проверить"
4. Перейдите к следующей задаче с помощью команды "Далее >>"
    - Можно перейти к произвольному заданию нажав на название текущего задания

## Критерии оценки

Домашнее задание проверяется экспертом.

Успешным выполнением считается появление статуса "Решение верно" для всех задач из диапазона 5.1. - 5.3 и корректная работа алгоритма работы с себестооимостью.
